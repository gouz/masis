(function(){var e,t=[].slice;e=function(){function e(){this._methods={}}return e.prototype.make=function(e,t){var n,s,r;return null==t&&(t={}),this.options=t,n=document.querySelectorAll(e),r=[],Array.prototype.forEach.call(n,function(e){return function(t){return r.push(e._init(t))}}(this)),s=r.length,s?1===s?r[0]:r:null},e.prototype._init=function(e){return this.element=e,this.children=e.querySelectorAll("*"),this.actives=this.children,this},e.prototype.addMethod=function(e,t){return this._methods[e]=t},e.prototype.exec=function(){var e,n;return e=arguments[0],n=2<=arguments.length?t.call(arguments,1):[],null!=this._methods[e]&&this._methods[e](this,n),this},e}(),this.Masis=new e,this.Masis.addMethod("filter",function(e,t){var n,s,r,i,l,o,a,u,c;if(t=t.length?t[0]:"*","*"===t)e.actives=e.children;else{for(i=[],n=e.element.querySelectorAll(t),c=e.actives,l=0,a=c.length;a>l;l++)for(s=c[l],o=0,u=n.length;u>o;o++)if(r=n[o],s===r){i.push(s);break}e.actives=i}return e.exec("view")}),this.Masis.addMethod("position",function(e){var t,n,s,r,i;for(r=~~e.element.offsetWidth,e.element.style.position="relative",t=[],n=i=0;r>=0?r>=i:i>=r;n=r>=0?++i:--i)t[n]=0;return s=function(e,t,s){var r;for(n=t,r=s[e];n--;)r<s[e+n]&&(r=s[e+n]);return r},Array.prototype.forEach.call(e.actives,function(){return function(e){var n,i,l,o,a,u,c,h,d,p,f,m;for(e.style.position="absolute",f=getComputedStyle(e),d=e.getBoundingClientRect(),i=parseInt(d.width+parseInt(f.marginLeft+parseInt(f.marginRight))),n=parseInt(d.height+parseInt(f.marginTop+parseInt(f.marginBottom))),u=0,o=0,l=1/0,c=l;r>=o;){for(a=o-1,m=o+i;a++<=m;)h=a+i,r>=h&&(c=n+s(a,i,t),l>c&&(l=c,u=a));o+=i}for(e.style.left=u+"px",e.style.top=l-n+"px",o=i,p=[];o--;)p.push(t[o+u]=l);return p}}(this)),e.element.style.height=Math.max.apply(Math,t)+"px"}),this.Masis.addMethod("scroll",function(e,t){var n,s,r,i,l,o,a,u,c,h,d,p,f,m,y;return null!=t&&(t=t[0]),null==t.mode&&(t.mode="vertical"),null==t.gutter&&(t.gutter=10),null==t.pad&&(t.pad=10),e.element.style.position="relative",e.element.style.overflow="hidden",e.element.innerHTML='<div class="mscr-content">'+e.element.innerHTML+"</div>",i=-1!==t.mode.indexOf("horizontal"),y=-1!==t.mode.indexOf("vertical"),i&&(e.element.innerHTML+='<div class="mscr-track-h"><div class="mscr-drag-h"/></div>'),y&&(e.element.innerHTML+='<div class="mscr-track-v"><div class="mscr-drag-v"/></div>'),n=e.element.querySelector(".mscr-content"),f=e.element.querySelector(".mscr-track-h"),s=e.element.querySelector(".mscr-drag-h"),m=e.element.querySelector(".mscr-track-v"),r=e.element.querySelector(".mscr-drag-v"),n.style.position="absolute",n.style.top=n.style.left=0,p=parseInt(n.offsetWidth)/parseInt(e.element.offsetWidth),d=parseInt(e.element.offsetHeight)/parseInt(n.offsetHeight),c=null,a=!1,document.addEventListener("mouseup",function(t){return t.preventDefault(),c=null,a=!1,e.element.classList.remove("show-scrollbar"),i&&s.classList.remove("moving"),y?r.classList.remove("moving"):void 0}),document.addEventListener("mousemove",function(e){return a&&null!=c?o(parseInt(e["page"+a])-parseInt(c["page"+a])):void 0}),u={X:0,Y:0},l={X:parseInt(e.element.offsetWidth),Y:parseInt(e.element.offsetHeight)},i&&(f.style.position="absolute",f.style.bottom=f.style.left=0,f.style.height=t.gutter+"px",s.style.position="absolute",s.style.top=s.style.left=0,s.style.height=t.gutter+"px",s.addEventListener("mousedown",function(t){return t.preventDefault(),a="X",c=t,e.element.classList.add("show-scrollbar"),this.classList.add("moving")})),y&&(m.style.position="absolute",m.style.top=m.style.right=0,m.style.width=t.gutter+"px",r.style.position="absolute",r.style.top=r.style.left=0,r.style.width=t.gutter+"px",r.addEventListener("mousedown",function(t){return t.preventDefault(),a="Y",c=t,e.element.classList.add("show-scrollbar"),this.classList.add("moving")})),h=function(){var t,n;return n=parseInt(e.element.offsetWidth),t=parseInt(e.element.offsetHeight),i&&(f.style.width=n+"px",s.style.width=~~(n*p)+"px"),y?(m.style.height=t+"px",r.style.height=~~(t*d)+"px"):void 0},h(),window.addEventListener("resize",function(){return h()}),o=function(e){var t,i,l;return"X"===a?(t=e,i=parseInt(f.offsetWidth)-parseInt(s.offsetWidth),t>i&&(t=i),0>t&&(t=0),s.style.left=t+"px",n.style.marginLeft=-t/p+"px"):(l=e,i=parseInt(m.offsetHeight)-parseInt(r.offsetHeight),l>i&&(l=i),0>l&&(l=0),r.style.top=l+"px",n.style.marginTop=-l/d+"px")}}),this.Masis.addMethod("view",function(e,t){return null==t&&(t=0),t.length||(t=0),t=parseInt(t),Array.prototype.forEach.call(e.children,function(e){return e.style.display="none"}),Array.prototype.forEach.call(e.actives,function(n,s){return!t||t&&e.current<=s&&s<e.current+t?n.style.display="":void 0})})}).call(this);