(function(){var t;t=function(){function t(t,e){var r,n,s;return this.options=null!=e?e:{},r=document.querySelectorAll(t),s=[],Array.prototype.forEach.call(r,function(t){return function(e){return s.push(t._init(e))}}(this)),n=s.length,n?1===n?s[0]:void 0:null}return t.prototype._init=function(t){return this.element=t,this.populate()},t}(),this.Masis=t,t.prototype.filter=function(t){var e,r,n,s,i,l,o,a,u;if(null==t&&(t="*"),"*"===t)this.actives=this.children;else{for(s=[],e=this.element.querySelectorAll(t),u=this.actives,i=0,o=u.length;o>i;i++)for(r=u[i],l=0,a=e.length;a>l;l++)if(n=e[l],r===n){s.push(r);break}this.actives=s}return this.populate(),this.view()},t.prototype.lazy=function(t,e,r){var n,s,i;return null==t&&(t=0),null==e&&(e="data-src"),null==r&&(r=null),i=window.innerHeight||document.documentElement.clientHeight,n=this.element.querySelectorAll("img["+e+"]"),s=function(s){return function(){return n=s.element.querySelectorAll("img["+e+"]"),Array.prototype.forEach.call(n,function(n){var s,l;return s=n.getBoundingClientRect(),-t<=(l=s.top-t)&&i>=l?(n.setAttribute("src",n.getAttribute(e)),n.removeAttribute(e),n.addEventListener("load",function(){return this.style.opacity=1,null!=r?r():void 0},!1)):void 0})}}(this),window.addEventListener("scroll",function(){return s()},!1),s()},t.prototype.populate=function(){var t,e,r,n;for(this.children=[],n=this.element.children,e=0,r=n.length;r>e;e++)t=n[e],8!==t.nodeType&&this.children.push(t);return this.actives=this.children,this.view()},t.prototype.position=function(t){var e,r,n,s,i;for(null==t&&(t={}),null==t.pad&&(t.pad=1),s=parseInt(this.element.offsetWidth),this.element.style.position="relative",e=[],r=i=0;s>=0?s>=i:i>=s;r=s>=0?++i:--i)e[r]=0;return n=function(e,n,s){var i;for(r=0,i=s[e];(r+=t.pad)<n;)i<s[e+r]&&(i=s[e+r]);return i},Array.prototype.forEach.call(this.actives,function(){return function(r){var i,l,o,a,u,p,h,c,f,d,y,v;for(r.style.position="absolute",y=getComputedStyle(r),f=r.getBoundingClientRect(),l=parseInt(f.width)+parseInt(y.marginLeft)+parseInt(y.marginRight),i=parseInt(f.height)+parseInt(y.marginTop)+parseInt(y.marginBottom),p=0,a=0,o=1/0,h=o;s>=a;){for(u=a-t.pad,v=a+l;u++<=v;)c=u+l,s>=c&&(h=i+n(u,l,e),o>h&&(o=h,p=u));a+=l}for(r.style.left=p+"px",r.style.top=o-i+"px",a=l,d=[];a--;)d.push(e[a+p]=o);return d}}(this)),this.element.style.height=Math.max.apply(Math,e)+"px",this},t.prototype.scroll=function(t){var e,r,n,s,i,l,o,a,u,p,h,c,f,d,y,v,g;return null==t&&(t={}),null==t.gutter&&(t.gutter=10),null==t.pad&&(t.pad=10),s=this.element,s.style.position="relative",s.style.overflow="hidden",s.innerHTML='<div class="mscr-content">'+s.innerHTML+"</div>",s.innerHTML+='<div class="mscr-track-h"><div class="mscr-drag-h"/></div>',s.innerHTML+='<div class="mscr-track-v"><div class="mscr-drag-v"/></div>',e=s.querySelector(".mscr-content"),e.style.width=s.offsetWidth+"px",e.style.height=s.offsetHeight+"px",null!=t.width&&(s.style.width=t.width),e.style.position="absolute",e.style.top=e.style.left=0,null!=t.height&&(s.style.height=t.height),h=parseInt(s.offsetWidth)/parseInt(e.offsetWidth),p=parseInt(s.offsetHeight)/parseInt(e.offsetHeight),l=1>h,d=1>p,l&&(c=s.querySelector(".mscr-track-h"),r=s.querySelector(".mscr-drag-h"),c.style.position="absolute",c.style.bottom=c.style.left=0,c.style.height=t.gutter+"px",r.style.position="absolute",r.style.top=r.style.left=0,r.style.height=t.gutter+"px"),d&&(f=s.querySelector(".mscr-track-v"),n=s.querySelector(".mscr-drag-v"),f.style.position="absolute",f.style.top=f.style.right=0,f.style.width=t.gutter+"px",n.style.position="absolute",n.style.top=n.style.left=0,n.style.width=t.gutter+"px"),l&&d&&(h=(parseInt(s.offsetWidth)-t.gutter)/parseInt(e.offsetWidth),p=(parseInt(s.offsetHeight)-t.gutter)/parseInt(e.offsetHeight)),u=null,a=!1,g={X:0,Y:0},document.addEventListener("mouseup",function(t){return t.preventDefault(),a=!1,s.classList.remove("show-scrollbar"),l&&(r.classList.remove("moving"),g.X=parseInt(r.style.left)),d?(n.classList.remove("moving"),g.Y=parseInt(n.style.top)):void 0}),document.addEventListener("mousemove",function(t){return a&&null!=u?o(parseInt(t["page"+a])-parseInt(u["page"+a])):void 0}),v=function(e){return e.preventDefault(),null!=e.originalEvent&&(e=e.originalEvent),s.classList.add("show-scrollbar"),a=e.shiftKey||e.wheelDeltaX?"X":"Y",o(t.pad*((e.wheelDelta||-e.detail)<0?1:-1)),a=!1,s.classList.remove("show-scrollbar"),l&&(g.X=parseInt(r.style.left)),d&&(g.Y=parseInt(n.style.top)),!1},s.addEventListener("mousewheel",v,!1),s.addEventListener("DOMMouseScroll",v,!1),null!=r&&r.addEventListener("mousedown",function(t){return t.preventDefault(),a="X",u=t,s.classList.add("show-scrollbar"),this.classList.add("moving")}),null!=n&&n.addEventListener("mousedown",function(t){return t.preventDefault(),a="Y",u=t,s.classList.add("show-scrollbar"),this.classList.add("moving")}),y=parseInt(s.offsetWidth),i=parseInt(s.offsetHeight),d&&l&&(y-=t.gutter,i-=t.gutter),l&&(c.style.width=y+"px",r.style.width=~~(y*h)+"px"),d&&(f.style.height=i+"px",n.style.height=~~(i*p)+"px"),o=function(t){var s,i,l;return t+=g[a],"X"===a?(s=t,i=parseInt(c.offsetWidth)-parseInt(r.offsetWidth),s>i&&(s=i),0>s&&(s=0),r.style.left=s+"px",e.style.left=~~(-s/h)+"px"):(l=t,i=parseInt(f.offsetHeight)-parseInt(n.offsetHeight),l>i&&(l=i),0>l&&(l=0),n.style.top=l+"px",e.style.top=~~(-l/p)+"px")},this},t.prototype.sort=function(t,e){var r,n;null==t&&(t="text"),null==e&&(e="ASC"),e=e.toUpperCase(),r=Array.prototype.slice.call(this.actives,0),r.sort(function(r,n){var s,i,l,o;return i=t.slice(1,-1),l="text"!==t?r.getAttribute(i):r.innerHTML,o="text"!==t?n.getAttribute(i):n.innerHTML,s="ASC"===e?1:-1,s*l.localeCompare(o)});for(n in r)this.element.appendChild(r[n]);return this},t.prototype.view=function(t,e){return null==t&&(t=0),null==e&&(e=0),t=parseInt(t),Array.prototype.forEach.call(this.children,function(t){return t.style.display="none"}),Array.prototype.forEach.call(this.actives,function(){return function(r,n){return!t||t&&n>e&&t+e>n?r.style.display="":void 0}}(this)),this}}).call(this);