(function(){var e,t=[].slice;e=function(){function e(){this._methods={}}return e.prototype.make=function(e,t){var n,r,s;return null==t&&(t={}),this.options=t,n=document.querySelectorAll(e),s=[],Array.prototype.forEach.call(n,function(e){return function(t){return s.push(e._init(t))}}(this)),r=s.length,r?1===r?s[0]:s:null},e.prototype._init=function(e){return this.element=e,this.children=e.querySelectorAll("*"),this.actives=this.children,this},e.prototype._active=function(){return Array.prototype.forEach.call(this.actives,function(e){return function(t,n){return n===e.current?t.classList.add("active"):t.classList.remove("active")}}(this))},e.prototype.addMethod=function(e,t){return this._methods[e]=t},e.prototype.exec=function(){var e,n;return e=arguments[0],n=2<=arguments.length?t.call(arguments,1):[],this._methods[e](this,n),this},e}(),this.Masis=new e,this.Masis.addMethod("filter",function(e,t){var n,r,s,i,o,l,a,c,u;if(t=t.length?t[0]:"*","*"===t)e.actives=e.children;else{for(i=[],n=e.element.querySelectorAll(t),u=e.actives,o=0,a=u.length;a>o;o++)for(r=u[o],l=0,c=n.length;c>l;l++)if(s=n[l],r===s){i.push(r);break}e.actives=i}return e.exec("view")}),this.Masis.addMethod("position",function(e){var t,n,r,s,i;for(s=~~e.element.offsetWidth,e.element.style.position="relative",t=[],n=i=0;s>=0?s>=i:i>=s;n=s>=0?++i:--i)t[n]=0;return r=function(e,t,r){var s;for(n=t,s=r[e];n--;)s<r[e+n]&&(s=r[e+n]);return s},Array.prototype.forEach.call(e.actives,function(){return function(e){var n,i,o,l,a,c,u,h,d,p,f,m;for(e.style.position="absolute",f=getComputedStyle(e),d=e.getBoundingClientRect(),i=parseInt(d.width+parseInt(f.marginLeft+parseInt(f.marginRight))),n=parseInt(d.height+parseInt(f.marginTop+parseInt(f.marginBottom))),c=0,l=0,o=1/0,u=o;s>=l;){for(a=l-1,m=l+i;a++<=m;)h=a+i,s>=h&&(u=n+r(a,i,t),o>u&&(o=u,c=a));l+=i}for(e.style.left=c+"px",e.style.top=o-n+"px",l=i,p=[];l--;)p.push(t[l+c]=o);return p}}(this)),e.element.style.height=Math.max.apply(Math,t)+"px"}),this.Masis.addMethod("scroll",function(e,t){var n,r,s,i,o,l,a,c,u,h,d,p,f,m,y;return null==t.mode&&(t.mode="vertical"),null==t.gutter&&(t.gutter="10px"),null==t.pad&&(t.pad=10),e.element.style.position="relative",e.element.style.overflow="hidden",e.element.innerHTML='<div class="mscr-content">'+e.element.innerHTML+"</div>",i=-1!==t.mode.indexOf("horizontal"),y=-1!==t.mode.indexOf("vertical"),i&&(e.element.innerHTML+='<div class="mscr-track-h"><div class="mscr-drag-h"/></div>'),y&&(e.element.innerHTML+='<div class="mscr-track-v"><div class="mscr-drag-v"/></div>'),n=e.element.querySelector(".mscr-content"),f=e.element.querySelector(".mscr-track-h"),r=e.element.querySelector(".mscr-drag-h"),m=e.element.querySelector(".mscr-track-v"),s=e.element.querySelector(".mscr-drag-v"),n.style.position="absolute",n.style.top=n.style.left=0,p=parseInt(n.offsetWidth)/parseInt(e.element.offsetWidth),d=parseInt(e.element.offsetHeight)/parseInt(n.offsetHeight),u=null,a=!1,document.addEventListener("mouseup",function(t){return t.preventDefault(),u=null,a=!1,e.element.classList.remove("show-scrollbar"),i&&r.classList.remove("moving"),y?s.classList.remove("moving"):void 0}),document.addEventListener("mousemove",function(e){return a&&null!=u?l(parseInt(e["page"+a])-parseInt(u["page"+a])):void 0}),c={X:0,Y:0},o={X:parseInt(e.element.offsetWidth),Y:parseInt(e.element.offsetHeight)},i&&(f.style.position="absolute",f.style.bottom=f.style.left=0,f.style.height=t.gutter,r.style.position="absolute",r.style.top=r.style.left=0,r.style.height=t.gutter,r.addEventListener("mousedown",function(t){return t.preventDefault(),a="X",u=t,e.element.classList.add("show-scrollbar"),this.classList.add("moving")})),y&&(m.style.position="absolute",m.style.top=m.style.right=0,m.style.width=t.gutter,s.style.position="absolute",s.style.top=s.style.left=0,s.style.width=t.gutter,s.addEventListener("mousedown",function(t){return t.preventDefault(),a="Y",u=t,e.element.classList.add("show-scrollbar"),this.classList.add("moving")})),h=function(){var t,n;return n=parseInt(e.element.offsetWidth),t=parseInt(e.element.offsetHeight),i&&(f.style.width=n+"px",r.style.width=~~(n*p)+"px"),y?(m.style.height=t+"px",s.style.height=~~(t*d)+"px"):void 0},h(),window.addEventListener("resize",function(){return h()}),l=function(e){var t,i,o;return"X"===a?(t=e,i=parseInt(f.offsetWidth)-parseInt(r.offsetWidth),t>i&&(t=i),0>t&&(t=0),r.style.left=t+"px",n.style.marginLeft=-t/p+"px"):(o=e,i=parseInt(m.offsetHeight)-parseInt(s.offsetHeight),o>i&&(o=i),0>o&&(o=0),s.style.top=o+"px",n.style.marginTop=-o/d+"px")}}),this.Masis.addMethod("view",function(e,t){return null==t&&(t=0),t.length||(t=0),t=parseInt(t),Array.prototype.forEach.call(e.children,function(e){return e.style.display="none"}),Array.prototype.forEach.call(e.actives,function(n,r){return!t||t&&e.current<=r&&r<e.current+t?n.style.display="":void 0})})}).call(this);