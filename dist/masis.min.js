(function(){var t;t=function(){function t(t,e){var n,r,s;return this.options=null!=e?e:{},n=document.querySelectorAll(t),s=[],Array.prototype.forEach.call(n,function(t){return function(e,n){return s.push(t._init(e))}}(this)),r=s.length,r?1===r?s[0]:void 0:null}return t.prototype._init=function(t){return this.element=t,this.populate()},t.prototype.populate=function(){var t,e,n,r;for(this.children=[],r=this.element.children,n=0,e=r.length;e>n;n++)t=r[n],8!==t.nodeType&&this.children.push(t);return this.actives=this.children,this.view()},t.prototype.view=function(t,e){return null==t&&(t=0),null==e&&(e=0),t=parseInt(t),Array.prototype.forEach.call(this.children,function(t){return t.style.display="none"}),Array.prototype.forEach.call(this.actives,function(n){return function(n,r){return!t||t&&r>=e&&t+e>r?n.style.display="":void 0}}(this)),this},t}(),this.Masis=t,t.prototype.filter=function(t){var e,n,r,s,l,i;if(null==t&&(t="*"),"*"===t)this.actives=this.children;else{for(s=function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)},l=[],i=this.actives,r=0,n=i.length;n>r;r++)e=i[r],s(e,t)&&l.push(e);this.actives=l}return this.view()},t.prototype.lazy=function(t,e,n){var r,s,l,i;return null==t&&(t=0),null==e&&(e="data-src"),null==n&&(n=null),i=window.innerHeight||document.documentElement.clientHeight,r=this.element.querySelectorAll("img["+e+"]"),s=function(s){return function(){return r=s.element.querySelectorAll("img["+e+"]"),Array.prototype.forEach.call(r,function(r){var s,l;return s=r.getBoundingClientRect(),-t<=(l=s.top-t)&&i>=l?(r.setAttribute("src",r.getAttribute(e)),r.removeAttribute(e),r.style.opacity=1,r.addEventListener("load",function(){return null!=n?n(r):void 0},!1)):void 0})}}(this),l=null,window.addEventListener("scroll",function(){return clearTimeout(l),l=setTimeout(function(){return s()},10)},!1),s()},t.prototype.position=function(t){var e,n,r,s,l,i;for(null==t&&(t={}),null==t.pad&&(t.pad=1),i=parseInt(this.element.offsetWidth),this.element.style.position="relative",e=[],n=r=0,l=i;l>=0?l>=r:r>=l;n=l>=0?++r:--r)e[n]=0;return s=function(e,r,s){var l;for(n=0,l=s[e];(n+=t.pad)<r;)l<s[e+n]&&(l=s[e+n]);return l},Array.prototype.forEach.call(this.actives,function(n){return function(n,r){var l,o,a,u,p,c,h,d,f,y,v,g;for(n.style.position="absolute",c=getComputedStyle(n),p=n.getBoundingClientRect(),parseInt(p.width)&&(o=parseInt(p.width)+(parseInt(c.marginLeft)+parseInt(c.marginRight))),parseInt(p.height)&&(l=parseInt(p.height)+(parseInt(c.marginTop)+parseInt(c.marginBottom))),g=0,f=0,d=1/0,a=d;i>=f;){for(y=f-t.pad,h=f+o;y++<=h;)u=y+o,i>=u&&(a=l+s(y,o,e),d>a&&(d=a,g=y));f+=o}for(n.style.left=g+"px",n.style.top=d-l+"px",f=o,v=[];f--;)v.push(e[f+g]=d);return v}}(this)),this.element.style.height=Math.max.apply(Math,e)+"px",this},t.prototype.scroll=function(t){var e,n,r,s,l,i,o,a,u,p,c,h,d,f,y,v,g,m,I,w,L,x;return null==t&&(t={}),null==t.gutter&&(t.gutter=10),null==t.pad&&(t.pad=10),o=this.element,o.innerHTML='<div class="mscr-content">'+o.innerHTML+"</div>",o.innerHTML+='<div class="mscr-track-h"><div class="mscr-drag-h"/></div>',o.innerHTML+='<div class="mscr-track-v"><div class="mscr-drag-v"/></div>',n=o.querySelector(".mscr-content"),n.style.width=o.offsetWidth+"px",n.style.height=o.offsetHeight+"px",null!=t.height&&(o.style.height=t.height),null!=t.width&&(o.style.width=t.width),r=parseInt(n.offsetWidth),e=parseInt(n.offsetHeight),a=parseInt(o.offsetWidth),i=parseInt(o.offsetHeight),v=a/r,y=i/e,o.style.position="relative",o.style.overflow="hidden",n.style.position="absolute",n.style.top=n.style.left=0,p=1>v,I=1>y,f=null,h=!1,x={X:0,Y:0},d=function(t,e,n){return t.preventDefault(),h=e,f=t,o.classList.add("show-scrollbar"),n.classList.add("moving")},p&&(g=o.querySelector(".mscr-track-h"),s=g.querySelector(".mscr-drag-h"),g.style.position="absolute",g.style.bottom=g.style.left=0,g.style.height=t.gutter+"px",s.style.position="absolute",s.style.top=s.style.left=0,s.style.height=t.gutter+"px",v=(a-parseInt(t.gutter))/r,w=a,I&&(w-=parseInt(t.gutter)),g.style.width=w+"px",s.style.width=~~(w*v)+"px",s.addEventListener("mousedown",function(t){return d(t,"X",this)})),I&&(m=o.querySelector(".mscr-track-v"),l=m.querySelector(".mscr-drag-v"),m.style.position="absolute",m.style.top=m.style.right=0,m.style.width=t.gutter+"px",l.style.position="absolute",l.style.top=l.style.left=0,l.style.width=t.gutter+"px",l.addEventListener("mousedown",function(t){return d(t,"Y",this)}),y=(i-parseInt(t.gutter))/e,u=i,p&&(u-=t.gutter),m.style.height=u+"px",l.style.height=~~(u*y)+"px"),document.addEventListener("mouseup",function(t){return t.preventDefault(),h=!1,o.classList.remove("show-scrollbar"),p&&(s.classList.remove("moving"),x.X=parseInt(s.style.left)),I?(l.classList.remove("moving"),x.Y=parseInt(l.style.top)):void 0}),document.addEventListener("mousemove",function(t){return h&&null!=f?c(parseInt(t["page"+h])-parseInt(f["page"+h])):void 0}),L=function(e){return null!=e.originalEvent&&(e=e.originalEvent),o.classList.add("show-scrollbar"),h=e.shiftKey||e.wheelDeltaX?"X":"Y","Y"===h&&parseInt(o.style.height)>=parseInt(n.style.height)?!0:(e.preventDefault(),c(t.pad*((e.wheelDelta||-e.detail)<0?1:-1)),h=!1,o.classList.remove("show-scrollbar"),p&&(x.X=parseInt(s.style.left)),I&&(x.Y=parseInt(l.style.top)),!1)},o.addEventListener("mousewheel",L,!1),o.addEventListener("DOMMouseScroll",L,!1),c=function(t){var e,r,i;if(t+=x[h],"X"===h){if(null!=g&&null!=s)return e=t,r=parseInt(g.offsetWidth)-parseInt(s.offsetWidth),e>r&&(e=r),0>e&&(e=0),s.style.left=e+"px",n.style.left=parseInt(-e/v)+"px"}else if(null!=m&&null!=l)return i=t,r=parseInt(m.offsetHeight)-parseInt(l.offsetHeight),i>r&&(i=r),0>i&&(i=0),l.style.top=i+"px",n.style.top=parseInt(-i/y)+"px"},this},t.prototype.sort=function(t,e){var n,r,s,l;for(null==t&&(t="text"),null==e&&(e="ASC"),e=e.toUpperCase(),n=Array.prototype.slice.call(this.children,0),n.sort(function(n,r){var s,l,i,o;return l=t.slice(1,-1),i="text"!==t?n.getAttribute(l):n.innerHTML,o="text"!==t?r.getAttribute(l):r.innerHTML,s="ASC"===e?1:-1,null==i&&(i=""),null==o&&(o=""),s*i.localeCompare(o)}),l=0,s=n.length;s>l;l++)r=n[l],this.element.appendChild(r);return this.populate()}}).call(this);